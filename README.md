# Blood Markers Analysis

This project is a TypeScript-based tool for analyzing blood marker data from a CSV file. It imports the data into a SQLite database and provides scripts to generate plots and perform other analyses.

## Features

- **CSV to SQLite:** Imports blood marker data from a CSV file into a SQLite database.
- **HOMA-IR Plotting:** Generates a plot of HOMA-IR over time.
- **Modern TypeScript:** Uses modern TypeScript features like `async/await` and `await using` for resource management.
- **Node.js Native TypeScript Support:** Runs TypeScript files directly with Node.js, without requiring `ts-node` or a separate compilation step.

## Prerequisites

- [Node.js](https://nodejs.org/) (v24.0.0 or higher)
- An npm-compatible package manager (e.g., `npm`, `yarn`, `pnpm`)

## Getting Started

1.  **Clone the repository:**

    ```bash
    git clone https://github.com/your-username/blood-markers.git
    cd blood-markers
    ```

2.  **Install dependencies:**

    ```bash
    npm install
    ```

3.  **Prepare your data:**

    Place your blood marker data in a CSV file named `historiclabdata.csv` in the root of the project. The first row of the CSV should contain the column headers.

4.  **Initialize the database:**

    This command will create a `blood_markers.sqlite` file and import the data from `historiclabdata.csv`.

    ```bash
    npm run db:init
    ```

## Usage

### Plot HOMA-IR

To generate a plot of your HOMA-IR data, run the following command:

```bash
node scripts/plot_homa_ir.ts
```

This will create a `homa_ir_plot.png` file in the root of the project.

## Project Structure

- `.rules/`: Contains the rules for the Cursor AI assistant.
- `scripts/`: Contains the scripts for importing data and generating plots.
- `src/`: Contains the source code for the project.
- `historiclabdata.csv`: The input data file (you need to provide this).
- `blood_markers.sqlite`: The SQLite database file (generated by `npm run db:init`).
- `homa_ir_plot.png`: The output plot file (generated by `scripts/plot_homa_ir.ts`).

## Contributing

Contributions are welcome! Please feel free to submit a pull request or open an issue. When contributing to this repository, please first discuss the change you wish to make via issue, email, or any other method with the owners of this repository before making a change.
